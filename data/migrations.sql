CREATE DATABASE IF NOT EXISTS clipboard;

USE clipboard;

CREATE TABLE IF NOT EXISTS user(
    id UUID UNIQUE NOT NULL,
    email TEXT UNIQUE NOT NULL,
    username TEXT UNIQUE NOT NULL,
    password TEXT NOT NULL,
    is_admin BOOLEAN NOT NULL DEFAULT FALSE
);

CREATE TABLE IF NOT EXISTS clip(
    id UUID PRIMARY KEY NOT NULL,
    url TEXT UNIQUE NOT NULL,
    content_type ENUM('TEXT', 'FILE') NOT NULL,
    status ENUM('ACTIVE', 'INACTIVE') NOT NULL,
    access_type ENUM('PRIVATE', 'PUBLIC', 'PROTECTED') NOT NULL,
    created_by UUID NULL DEFAULT NULL,
    valid_from TIMESTAMP(6) GENERATED ALWAYS AS ROW START,
    valid_to TIMESTAMP(6) GENERATED ALWAYS AS ROW END,
    PERIOD FOR SYSTEM_TIME(valid_from, valid_to)
) WITH SYSTEM VERSIONING;